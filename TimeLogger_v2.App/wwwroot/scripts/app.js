import{sessionStore}from"./clientstore.js";import{CreateAccountComponent,ForgotPasswordComponent,LoginComponent,LogoutComponent,PasswordResetComponent}from"./account.js";import{HomeComponent,InsightsComponent,TasksComponent,NotYetImplementedComponent}from"./pages.js";const PrivacyPolicyComponent={template:"<p>Privacy policy</p>"},TermsOfServiceComponent={template:"<p>Terms of service</p>"},DEFAULT_TITLE="TimeLoggerLive v2",routes=[{name:"CreateAccount",path:"/create",component:CreateAccountComponent,meta:{isPublicPage:!0,title:"Create account"}},{name:"ForgotPassword",path:"/forgot",component:ForgotPasswordComponent,meta:{isPublicPage:!0,title:"Forgot password"}},{name:"Login",path:"/login",component:LoginComponent,meta:{isPublicPage:!0,title:"Login"}},{name:"Logout",path:"/logout",component:LogoutComponent,meta:{isPublicPage:!0}},{name:"PasswordReset",path:"/password-reset/:id",component:PasswordResetComponent,meta:{isPublicPage:!0,title:"Password reset"}},{name:"PrivacyPolicy",path:"/privacy",component:PrivacyPolicyComponent,meta:{isPublicPage:!0,title:"Privacy policy"}},{name:"TermsOfService",path:"/terms-of-service",component:TermsOfServiceComponent,meta:{isPublicPage:!0,title:"Terms of service"}},{name:"Home",path:"/home",component:HomeComponent,meta:{title:"Daily logs"}},{name:"Insights",path:"/insights",component:InsightsComponent,meta:{title:"Insights"}},{name:"Tasks",path:"/tasks",component:TasksComponent,meta:{title:"Tasks"}},{name:"UpgradeAccount",path:"/upgrade-account",component:NotYetImplementedComponent,meta:{title:"Upgrade your account"}},{name:"NotYetImplemented",path:"/nyi",component:NotYetImplementedComponent,meta:{title:"Not yet implemented"}},{path:"/",redirect:{name:"Home"}}],router=VueRouter.createRouter({history:VueRouter.createWebHashHistory(),routes:routes});router.beforeEach((e,t,o)=>{e.matched.some(e=>e.meta&&e.meta.isPublicPage)?o():sessionStore.getter.isLoggedIn()?o():o({name:"Login",query:{redirect:e.fullPath}})}),router.afterEach((e,t)=>{Vue.nextTick(()=>{let t=DEFAULT_TITLE;e.meta.title&&(t+=" | "+e.meta.title),document.title=t})});const vue_app=Vue.createApp({});vue_app.use(router),vue_app.mount("#app");